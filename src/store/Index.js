import Vue from 'vue'
import Vuex from 'vuex'

Vue.use(Vuex)

const HOME_DATA_LIMIT = 6

const DEFAULT_LEDGERS = [
  {"feePool":"8.696481","baseFeeCALL":"0.00001","ledgerHash":"C3B637C6057EE68FE0F20CCDC4994575DD44C25A769FE5CB125FF7D2002CB4E9","ledgerVersion":25693250,"ledgerTimestamp":"2020-08-27T04:15:33.000Z","reserveBaseCALL":"0.000001","reserveIncrementCALL":"0.000001","transactionCount":0,"validatedLedgerVersions":"11874029-25693250"},
  {"feePool":"8.696481","baseFeeCALL":"0.00001","ledgerHash":"73FD1B215C9D1C989ABB7AE75FA5A26D36076E26229E4865AFDB99E7174808D9","ledgerVersion":25693249,"ledgerTimestamp":"2020-08-27T04:15:32.000Z","reserveBaseCALL":"0.000001","reserveIncrementCALL":"0.000001","transactionCount":0,"validatedLedgerVersions":"11874029-25693249"},
  {"feePool":"8.696481","baseFeeCALL":"0.00001","ledgerHash":"DFD5BBA47E5619CE40AD0881D952A07DBDF36A21659577378E86410BDACECE01","ledgerVersion":25693248,"ledgerTimestamp":"2020-08-27T04:15:31.000Z","reserveBaseCALL":"0.000001","reserveIncrementCALL":"0.000001","transactionCount":0,"validatedLedgerVersions":"11874029-25693248"},
  {"feePool":"8.696481","baseFeeCALL":"0.00001","ledgerHash":"A33ED2FAC8008BCCB44787AF0A236D620C10410FF854AFDAA12332A62E454583","ledgerVersion":25693247,"ledgerTimestamp":"2020-08-27T04:15:30.000Z","reserveBaseCALL":"0.000001","reserveIncrementCALL":"0.000001","transactionCount":0,"validatedLedgerVersions":"11874029-25693247"},
  {"feePool":"8.696481","baseFeeCALL":"0.00001","ledgerHash":"4AFBD67F9ED8818EDD43C91F639FED3C12285F84A275DDEDD8EA0948F408CC29","ledgerVersion":25693246,"ledgerTimestamp":"2020-08-27T04:15:22.000Z","reserveBaseCALL":"0.000001","reserveIncrementCALL":"0.000001","transactionCount":0,"validatedLedgerVersions":"11874029-25693246"},
  {"feePool":"8.696481","baseFeeCALL":"0.00001","ledgerHash":"5C0B2121A328D97A3BF9A0FBAE417D017E3A3CCA908178B344F2396BB54C7121","ledgerVersion":25693245,"ledgerTimestamp":"2020-08-27T04:15:21.000Z","reserveBaseCALL":"0.000001","reserveIncrementCALL":"0.000001","transactionCount":0,"validatedLedgerVersions":"11874029-25693245"}
]

const DEFAULT_TRANSACTIONS = [
  {"engine_result":"tesSUCCESS","engine_result_code":0,"engine_result_message":"The transaction was applied. Only final in a validated ledger.","ledger_hash":"88676BA4370F5F7434DD88F00570F13A4BFB0A0586821F3F32489FCE7D5AEADB","ledger_index":25716957,"meta":{"AffectedNodes":[{"ModifiedNode":{"FinalFields":{"Fans":"0000000000000009","Flags":0,"Issued":{"currency":"CNH","issuer":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","value":"999981.0032"},"LowNode":"0000000000000000","Total":{"currency":"CNH","issuer":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","value":"10000000000"}},"LedgerEntryType":"IssueRoot","LedgerIndex":"B2A239F9256F6E07C7DBF8398684DF89BCD6461794367375C878EB90BC021767","PreviousFields":{"Issued":{"currency":"CNH","issuer":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","value":"999991.0032"}}}},{"ModifiedNode":{"FinalFields":{"Balance":"7899095","Flags":0},"LedgerEntryType":"FeeRoot","LedgerIndex":"B4DE823055D00BC12CD78FE1AAF74EE6062195B2629F49A25915A39C64BE1900","PreviousFields":{"Balance":"7899083"}}},{"ModifiedNode":{"FinalFields":{"Account":"chkw6nVJ1g1APQ1vA5EX9ek5Vb4ZGrckwP","Balance":"500887947248","Flags":8388608,"OwnerCount":4,"Sequence":250},"LedgerEntryType":"AccountRoot","LedgerIndex":"BDDCCAB5F7C25D223C26BE530DB576B0FCB8414E7C3DA51E4780D22F9D154ACF","PreviousFields":{"Balance":"500887947260","Sequence":249},"PreviousTxnID":"1483C9277E52ACE89819CA87B7AFA8966CD14A40C54CCA8F97DF8A9B569C0E58","PreviousTxnLgrSeq":25716946}},{"ModifiedNode":{"FinalFields":{"Balance":{"currency":"CNH","issuer":"ccccccccccccccccccccBZbvji","value":"999970.0223"},"Flags":1114112,"HighLimit":{"currency":"CNH","issuer":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","value":"0"},"HighNode":"0000000000000000","LowLimit":{"currency":"CNH","issuer":"chkw6nVJ1g1APQ1vA5EX9ek5Vb4ZGrckwP","value":"100000000"},"LowNode":"0000000000000000"},"LedgerEntryType":"CallState","LedgerIndex":"F744E3B36BCAD20A9A42E18E980AE52B7A23821DD5A50022FC2EC2D62791D749","PreviousFields":{"Balance":{"currency":"CNH","issuer":"ccccccccccccccccccccBZbvji","value":"999980.0223"}},"PreviousTxnID":"CEDC501053B87DD8D0095FFF39B462415ACB7E4DF1A1D6CDE90D2CB3C68BEFA4","PreviousTxnLgrSeq":25716901}}],"TransactionIndex":0,"TransactionResult":"tesSUCCESS"},"status":"closed","transaction":{"Account":"chkw6nVJ1g1APQ1vA5EX9ek5Vb4ZGrckwP","Amount":{"currency":"CNH","issuer":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","value":"10"},"Destination":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","Fee":"12","Flags":0,"SendMax":{"currency":"CNH","issuer":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","value":"10"},"Sequence":249,"SigningPubKey":"02EDE59E333C4A1699A9E7AEACCA3CC1D68A1CCD114C5753F994C6564B59796205","TransactionType":"Payment","TxnSignature":"3045022100C3C78D7CC7E6BB05E4B9059A13F4C91271DFEB4B741FB2AC6B16B79DA3BA769002202DBF2FA296181DDE050C193B02804730831DD19A06CF617453F4D1C598D3A02C","date":651888112,"hash":"93008FB22F67005AE6F2B856A75A4977F80611B9A0B5247521DBC8F938A929FF"},"type":"transaction","validated":true},
  {"engine_result":"tesSUCCESS","engine_result_code":0,"engine_result_message":"The transaction was applied. Only final in a validated ledger.","ledger_hash":"6396835E09E6742DA76B6567C9F51CAF9F3BFBF9A02E55891EF420157322EE06","ledger_index":25716946,"meta":{"AffectedNodes":[{"ModifiedNode":{"FinalFields":{"Account":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","Balance":"252249946","Flags":8388608,"OwnerCount":1,"Sequence":6},"LedgerEntryType":"AccountRoot","LedgerIndex":"1D1C99AA5E9A5D77A380E6BEF104C56A053943C94D2E1C17A44CA46B8B6534EA","PreviousFields":{"Balance":"152249946"},"PreviousTxnID":"671178B785D418AA75FFE9BFD24AF67A649F6020BBD74233EB053223D386ED6C","PreviousTxnLgrSeq":25716937}},{"ModifiedNode":{"FinalFields":{"Balance":"7899083","Flags":0},"LedgerEntryType":"FeeRoot","LedgerIndex":"B4DE823055D00BC12CD78FE1AAF74EE6062195B2629F49A25915A39C64BE1900","PreviousFields":{"Balance":"7899071"}}},{"ModifiedNode":{"FinalFields":{"Account":"chkw6nVJ1g1APQ1vA5EX9ek5Vb4ZGrckwP","Balance":"500887947260","Flags":8388608,"OwnerCount":4,"Sequence":249},"LedgerEntryType":"AccountRoot","LedgerIndex":"BDDCCAB5F7C25D223C26BE530DB576B0FCB8414E7C3DA51E4780D22F9D154ACF","PreviousFields":{"Balance":"500987947272","Sequence":248},"PreviousTxnID":"671178B785D418AA75FFE9BFD24AF67A649F6020BBD74233EB053223D386ED6C","PreviousTxnLgrSeq":25716937}}],"TransactionIndex":0,"TransactionResult":"tesSUCCESS"},"status":"closed","transaction":{"Account":"chkw6nVJ1g1APQ1vA5EX9ek5Vb4ZGrckwP","Amount":"100000000","Destination":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","Fee":"12","Flags":0,"Sequence":248,"SigningPubKey":"02EDE59E333C4A1699A9E7AEACCA3CC1D68A1CCD114C5753F994C6564B59796205","TransactionType":"Payment","TxnSignature":"30450221008BC64CDDC6D346EDA13527B27C29F5A0FD8D659769EF8CD4763A9F4F460DFD51022030D39CE93C8693E874E16287B07D2CE37E71FEDF30EC735E364DE98A6CD22D2C","date":651888081,"hash":"1483C9277E52ACE89819CA87B7AFA8966CD14A40C54CCA8F97DF8A9B569C0E58"},"type":"transaction","validated":true},
  {"engine_result":"tesSUCCESS","engine_result_code":0,"engine_result_message":"The transaction was applied. Only final in a validated ledger.","ledger_hash":"38FFA64D0C8EF64C57199CC44574F66C1F1DCC5AACEAEF281CFB41842130DEB9","ledger_index":25716937,"meta":{"AffectedNodes":[{"ModifiedNode":{"FinalFields":{"Account":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","Balance":"152249946","Flags":8388608,"OwnerCount":1,"Sequence":6},"LedgerEntryType":"AccountRoot","LedgerIndex":"1D1C99AA5E9A5D77A380E6BEF104C56A053943C94D2E1C17A44CA46B8B6534EA","PreviousFields":{"Balance":"150249946"},"PreviousTxnID":"4397DC860DCA6316D490F0084F7E17666573873AE9DEED9A7ED476B12479C8D1","PreviousTxnLgrSeq":25716921}},{"ModifiedNode":{"FinalFields":{"Balance":"7899071","Flags":0},"LedgerEntryType":"FeeRoot","LedgerIndex":"B4DE823055D00BC12CD78FE1AAF74EE6062195B2629F49A25915A39C64BE1900","PreviousFields":{"Balance":"7899059"}}},{"ModifiedNode":{"FinalFields":{"Account":"chkw6nVJ1g1APQ1vA5EX9ek5Vb4ZGrckwP","Balance":"500987947272","Flags":8388608,"OwnerCount":4,"Sequence":248},"LedgerEntryType":"AccountRoot","LedgerIndex":"BDDCCAB5F7C25D223C26BE530DB576B0FCB8414E7C3DA51E4780D22F9D154ACF","PreviousFields":{"Balance":"500989947284","Sequence":247},"PreviousTxnID":"4397DC860DCA6316D490F0084F7E17666573873AE9DEED9A7ED476B12479C8D1","PreviousTxnLgrSeq":25716921}}],"TransactionIndex":0,"TransactionResult":"tesSUCCESS"},"status":"closed","transaction":{"Account":"chkw6nVJ1g1APQ1vA5EX9ek5Vb4ZGrckwP","Amount":"2000000","Destination":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","Fee":"12","Flags":0,"Sequence":247,"SigningPubKey":"02EDE59E333C4A1699A9E7AEACCA3CC1D68A1CCD114C5753F994C6564B59796205","TransactionType":"Payment","TxnSignature":"3045022100960BB2F1EEF87E1DDDB50B23375F932E64A9CD4B46B79BF2632211D8F792070C022002986FC5B8809FB96E2E2F32AD88FDC52D36E41EC150CC391363FE3747CBB647","date":651888052,"hash":"671178B785D418AA75FFE9BFD24AF67A649F6020BBD74233EB053223D386ED6C"},"type":"transaction","validated":true},
  {"engine_result":"tesSUCCESS","engine_result_code":0,"engine_result_message":"The transaction was applied. Only final in a validated ledger.","ledger_hash":"C1E1FC0C7F5B7E2880D06D314C34CDC42DF60B96C001508BF67BB44FB359B6FA","ledger_index":25716921,"meta":{"AffectedNodes":[{"ModifiedNode":{"FinalFields":{"Account":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","Balance":"150249946","Flags":8388608,"OwnerCount":1,"Sequence":6},"LedgerEntryType":"AccountRoot","LedgerIndex":"1D1C99AA5E9A5D77A380E6BEF104C56A053943C94D2E1C17A44CA46B8B6534EA","PreviousFields":{"Balance":"140249946"},"PreviousTxnID":"69FD0A9C2980FA6E632C17A1921CAB788037D9C7F35B2F2E430A56BACA8BF0D1","PreviousTxnLgrSeq":25695807}},{"ModifiedNode":{"FinalFields":{"Balance":"7899059","Flags":0},"LedgerEntryType":"FeeRoot","LedgerIndex":"B4DE823055D00BC12CD78FE1AAF74EE6062195B2629F49A25915A39C64BE1900","PreviousFields":{"Balance":"7899047"}}},{"ModifiedNode":{"FinalFields":{"Account":"chkw6nVJ1g1APQ1vA5EX9ek5Vb4ZGrckwP","Balance":"500989947284","Flags":8388608,"OwnerCount":4,"Sequence":247},"LedgerEntryType":"AccountRoot","LedgerIndex":"BDDCCAB5F7C25D223C26BE530DB576B0FCB8414E7C3DA51E4780D22F9D154ACF","PreviousFields":{"Balance":"500999947296","Sequence":246},"PreviousTxnID":"CEDC501053B87DD8D0095FFF39B462415ACB7E4DF1A1D6CDE90D2CB3C68BEFA4","PreviousTxnLgrSeq":25716901}}],"TransactionIndex":0,"TransactionResult":"tesSUCCESS"},"status":"closed","transaction":{"Account":"chkw6nVJ1g1APQ1vA5EX9ek5Vb4ZGrckwP","Amount":"10000000","Destination":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","Fee":"12","Flags":0,"Sequence":246,"SigningPubKey":"02EDE59E333C4A1699A9E7AEACCA3CC1D68A1CCD114C5753F994C6564B59796205","TransactionType":"Payment","TxnSignature":"3044022017809D171E2A2796F11EADC90819F723FDEA34609855F99E25BC29A71322A2E8022010B9069AF6BE7FCAED2309F5D3C0AB27AC29210A131CEF6400218915FF923E7C","date":651888002,"hash":"4397DC860DCA6316D490F0084F7E17666573873AE9DEED9A7ED476B12479C8D1"},"type":"transaction","validated":true},
  {"engine_result":"tesSUCCESS","engine_result_code":0,"engine_result_message":"The transaction was applied. Only final in a validated ledger.","ledger_hash":"EF66AAA0C73951C0CDB1B4D6CBAACD3345BB58731FF1E9E8A78E66A70FB05FD6","ledger_index":25716901,"meta":{"AffectedNodes":[{"ModifiedNode":{"FinalFields":{"Fans":"0000000000000009","Flags":0,"Issued":{"currency":"CNH","issuer":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","value":"999991.0032"},"LowNode":"0000000000000000","Total":{"currency":"CNH","issuer":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","value":"10000000000"}},"LedgerEntryType":"IssueRoot","LedgerIndex":"B2A239F9256F6E07C7DBF8398684DF89BCD6461794367375C878EB90BC021767","PreviousFields":{"Issued":{"currency":"CNH","issuer":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","value":"999992.0032"}}}},{"ModifiedNode":{"FinalFields":{"Balance":"7899047","Flags":0},"LedgerEntryType":"FeeRoot","LedgerIndex":"B4DE823055D00BC12CD78FE1AAF74EE6062195B2629F49A25915A39C64BE1900","PreviousFields":{"Balance":"7899035"}}},{"ModifiedNode":{"FinalFields":{"Account":"chkw6nVJ1g1APQ1vA5EX9ek5Vb4ZGrckwP","Balance":"500999947296","Flags":8388608,"OwnerCount":4,"Sequence":246},"LedgerEntryType":"AccountRoot","LedgerIndex":"BDDCCAB5F7C25D223C26BE530DB576B0FCB8414E7C3DA51E4780D22F9D154ACF","PreviousFields":{"Balance":"500999947308","Sequence":245},"PreviousTxnID":"69FD0A9C2980FA6E632C17A1921CAB788037D9C7F35B2F2E430A56BACA8BF0D1","PreviousTxnLgrSeq":25695807}},{"ModifiedNode":{"FinalFields":{"Balance":{"currency":"CNH","issuer":"ccccccccccccccccccccBZbvji","value":"999980.0223"},"Flags":1114112,"HighLimit":{"currency":"CNH","issuer":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","value":"0"},"HighNode":"0000000000000000","LowLimit":{"currency":"CNH","issuer":"chkw6nVJ1g1APQ1vA5EX9ek5Vb4ZGrckwP","value":"100000000"},"LowNode":"0000000000000000"},"LedgerEntryType":"CallState","LedgerIndex":"F744E3B36BCAD20A9A42E18E980AE52B7A23821DD5A50022FC2EC2D62791D749","PreviousFields":{"Balance":{"currency":"CNH","issuer":"ccccccccccccccccccccBZbvji","value":"999981.0223"}},"PreviousTxnID":"56D72961DD038FE5AE71CF3FA9989B54D71EA34937F1DBE1884F9EED2044098F","PreviousTxnLgrSeq":25234125}}],"TransactionIndex":0,"TransactionResult":"tesSUCCESS"},"status":"closed","transaction":{"Account":"chkw6nVJ1g1APQ1vA5EX9ek5Vb4ZGrckwP","Amount":{"currency":"CNH","issuer":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","value":"1"},"Destination":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","Fee":"12","Flags":0,"SendMax":{"currency":"CNH","issuer":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","value":"1"},"Sequence":245,"SigningPubKey":"02EDE59E333C4A1699A9E7AEACCA3CC1D68A1CCD114C5753F994C6564B59796205","TransactionType":"Payment","TxnSignature":"3045022100A5594756F715EA2FFFDF88616553D62E911039F8D72B00F55129CE6F39A8E90202204FAD4E787C8939BAACA0962A0F1A40BE0B97F578BBF5096BFF170FE11D9A3B6A","date":651887942,"hash":"CEDC501053B87DD8D0095FFF39B462415ACB7E4DF1A1D6CDE90D2CB3C68BEFA4"},"type":"transaction","validated":true},
  {"engine_result":"tesSUCCESS","engine_result_code":0,"engine_result_message":"The transaction was applied. Only final in a validated ledger.","ledger_hash":"843EE0E529EA060955F211E889266AD0183A5E5B853745DB1FE0357348E6FCFE","ledger_index":25693022,"meta":{"AffectedNodes":[{"ModifiedNode":{"FinalFields":{"Account":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","Balance":"138249946","Flags":8388608,"OwnerCount":1,"Sequence":6},"LedgerEntryType":"AccountRoot","LedgerIndex":"1D1C99AA5E9A5D77A380E6BEF104C56A053943C94D2E1C17A44CA46B8B6534EA","PreviousFields":{"Balance":"137249946"},"PreviousTxnID":"07E62D9C4A76905BACB492E17FCDAF5227EE8B01A626B1CAD963CEFD092A1A99","PreviousTxnLgrSeq":25692955}},{"ModifiedNode":{"FinalFields":{"Balance":"7898939","Flags":0},"LedgerEntryType":"FeeRoot","LedgerIndex":"B4DE823055D00BC12CD78FE1AAF74EE6062195B2629F49A25915A39C64BE1900","PreviousFields":{"Balance":"7898927"}}},{"ModifiedNode":{"FinalFields":{"Account":"chkw6nVJ1g1APQ1vA5EX9ek5Vb4ZGrckwP","Balance":"501001947332","Flags":8388608,"OwnerCount":4,"Sequence":243},"LedgerEntryType":"AccountRoot","LedgerIndex":"BDDCCAB5F7C25D223C26BE530DB576B0FCB8414E7C3DA51E4780D22F9D154ACF","PreviousFields":{"Balance":"501002947344","Sequence":242},"PreviousTxnID":"07E62D9C4A76905BACB492E17FCDAF5227EE8B01A626B1CAD963CEFD092A1A99","PreviousTxnLgrSeq":25692955}}],"TransactionIndex":0,"TransactionResult":"tesSUCCESS"},"status":"closed","transaction":{"Account":"chkw6nVJ1g1APQ1vA5EX9ek5Vb4ZGrckwP","Amount":"1000000","Destination":"cEJNrFNcTA6BxiSY6TKvtxT7Kg7vrVq9hz","Fee":"12","Flags":0,"Sequence":242,"SigningPubKey":"02EDE59E333C4A1699A9E7AEACCA3CC1D68A1CCD114C5753F994C6564B59796205","TransactionType":"Payment","TxnSignature":"304302201ED2F5B476AF060CB4F2ECD3C18E9FE8EC5D3418688407A3933B46633E6476C5021F764017FCA7D118D0902CF1AB40A7D29E330F6E5C09097D947A3CA1221388C7","date":651816251,"hash":"66C4090E960062579C7B4AC28464909975D2D2FB3057BA5C2FC40387AE9E76F7"},"type":"transaction","validated":true}
]

export default new Vuex.Store({
  state: {
    api: new call.CallAPI({ server: 'wss://s1.callchain.live:5020' }),
    status: {feePool: '0', baseFeeCALL: '0.00001', reserveBaseCALL: '0.000001', reserveIncrementCALL: '0.000001'},
    height: 24997812,
    server: {host: 's1.callchain.live', port: '5020', ssl: true},
    blocks: DEFAULT_LEDGERS,
    transactions: DEFAULT_TRANSACTIONS
  },
  getters: {
    networkStatus(state) {
      return state.api.isConnected && state.api.isConnected()
    }
  },
  mutations: {
    initApi(state, api) {
      state.api = api
    },
    updateLedger(state, ledger) {
      state.status.feePool = ledger.feePool;
      state.status.baseFeeCALL = (ledger.baseFeeCALL);
      state.status.reserveBaseCALL = (ledger.reserveBaseCALL);
      state.status.reserveIncrementCALL = (ledger.reserveIncrementCALL);
      state.blocks.unshift(ledger);
      if (state.blocks.length > HOME_DATA_LIMIT) {
        state.blocks.pop();
      }
    },
    updateTransactions(state, tx) {
      console.log(JSON.stringify(tx));
      state.transactions.unshift(tx);
      if (state.transactions.length > HOME_DATA_LIMIT) {
        state.transactions.pop();
      }
    }
  },
  actions: {
  },
  modules: {
  }
})
